;(function(){function e(e,t){if(typeof e==="undefined"){return false}var n="innerText"in e?"innerText":"textContent";try{e[n]=t}catch(r){e.setAttribute("innerText",t)}}function t(e,t,n){if(!e.addEventListener){e.attachEvent(t,n)}else{e.addEventListener(t,n,true)}}videojs.Youtube=videojs.MediaTechController.extend({init:function(t,n,r){videojs.MediaTechController.call(this,t,n,r);this.features["progressEvents"]=false;this.features["timeupdateEvents"]=false;if(typeof n["source"]!="undefined"){for(var i in n["source"]){t.options()[i]=n["source"][i]}}this.userQuality=videojs.Youtube.convertQualityName(t.options()["quality"]);this.player_=t;this.player_el_=document.getElementById(t.id());this.player_el_.className+=" vjs-youtube";this.qualityButton=document.createElement("div");this.qualityButton.setAttribute("class","vjs-quality-button vjs-menu-button vjs-control");this.qualityButton.setAttribute("tabindex",0);var s=document.createElement("div");this.qualityButton.appendChild(s);this.qualityTitle=document.createElement("span");s.appendChild(this.qualityTitle);if(t.options()["quality"]!=="undefined"){e(this.qualityTitle,t.options()["quality"]||"auto")}var o=document.createElement("div");o.setAttribute("class","vjs-menu");this.qualityButton.appendChild(o);this.qualityMenuContent=document.createElement("ul");this.qualityMenuContent.setAttribute("class","vjs-menu-content");o.appendChild(this.qualityMenuContent);this.id_=this.player_.id()+"_youtube_api";this.el_=videojs.Component.prototype.createEl("iframe",{id:this.id_,className:"vjs-tech",scrolling:"no",marginWidth:0,marginHeight:0,frameBorder:0,webkitAllowFullScreen:"true",mozallowfullscreen:"true",allowFullScreen:"true"});this.player_el_.insertBefore(this.el_,this.player_el_.firstChild);if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var u=new Number(RegExp.$1);if(u<11)this.addIframeBlocker(u)}else if(!/(iPad|iPhone|iPod|android)/g.test(navigator.userAgent)){this.el_.className+=" onDesktop"}this.parseSrc(t.options()["src"]);this.playOnReady=this.player_.options()["autoplay"]||false;this.forceSSL=this.player_.options()["forceSSL"]||true;this.forceHTML5=this.player_.options()["forceHTML5"]||true;var a={enablejsapi:1,iv_load_policy:3,playerapiid:this.id(),disablekb:1,wmode:"transparent",controls:this.player_.options()["ytcontrols"]?1:0,html5:this.player_.options()["forceHTML5"]?1:null,playsinline:this.player_.options()["playsInline"]?1:0,showinfo:0,modestbranding:1,rel:0,autoplay:this.playOnReady?1:0,loop:this.player_.options()["loop"]?1:0,list:this.playlistId,vq:this.userQuality,origin:window.location.protocol+"//"+window.location.host};for(var f in a){if(a.hasOwnProperty(f)&&(typeof a[f]==="undefined"||a[f]===null)){delete a[f]}}if(this.videoId==null){this.el_.src="about:blank"}else{this.el_.src=(this.forceSSL?"https:":window.location.protocol)+"//www.youtube.com/embed/"+this.videoId+"?"+videojs.Youtube.makeQueryString(a);if(this.player_.options()["ytcontrols"]){this.player_.controls(false)}else if(typeof this.player_.poster()=="undefined"){setTimeout(function(){var e=h.player_el_.querySelectorAll(".vjs-poster")[0];e.style.backgroundImage="url(https://img.youtube.com/vi/"+h.videoId+"/0.jpg)";e.style.display=""},100)}if(videojs.Youtube.apiReady){this.loadYoutube()}else{videojs.Youtube.loadingQueue.push(this);if(!videojs.Youtube.apiLoading){var l=document.createElement("script");l.onerror=function(e){h.onError(e)};l.src=!this.forceSSL&&window.location.protocol!=="file:"?"//www.youtube.com/iframe_api":"https://www.youtube.com/iframe_api";var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(l,c);videojs.Youtube.apiLoading=true}}}var h=this;t.ready(function(){var e=h.player_el_.querySelectorAll(".vjs-control-bar")[0];e.appendChild(h.qualityButton);if(h.playOnReady&&!h.player_.options()["ytcontrols"]){if(typeof h.player_.loadingSpinner!="undefined"){h.player_.loadingSpinner.show()}if(typeof h.player_.bigPlayButton!="undefined"){h.player_.bigPlayButton.hide()}}t.trigger("loadstart")});this.on("dispose",function(){this.ytplayer.destroy();this.player_el_.querySelectorAll(".vjs-poster")[0].style.backgroundImage="none";if(this.el_.parentNode){this.el_.parentNode.removeChild(this.el_)}this.qualityButton.parentNode.removeChild(this.qualityButton);if(typeof this.player_.loadingSpinner!="undefined"){this.player_.loadingSpinner.hide()}if(typeof this.player_.bigPlayButton!="undefined"){this.player_.bigPlayButton.hide()}if(this.iframeblocker)this.player_el_.removeChild(this.iframeblocker)})}});videojs.Youtube.prototype.addIframeBlocker=function(e){this.iframeblocker=videojs.Component.prototype.createEl("div");this.iframeblocker.className="iframeblocker";this.iframeblocker.style.position="absolute";this.iframeblocker.style.left=0;this.iframeblocker.style.right=0;this.iframeblocker.style.top=0;this.iframeblocker.style.bottom=0;this.iframeblocker.style.zIndex=9999;if(e<9){this.iframeblocker.style.opacity=.01}else{this.iframeblocker.style.background="rgba(255, 255, 255, 0.01)"}var n=this;t(this.iframeblocker,"mousemove",function(e){if(!n.player_.userActive()){n.player_.userActive(true)}e.stopPropagation();e.preventDefault()});this.player_el_.insertBefore(this.iframeblocker,this.el_.nextSibling)};videojs.Youtube.prototype.parseSrc=function(t){this.srcVal=t;if(t){var n=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;var r=t.match(n);if(r&&r[2].length==11){this.videoId=r[2]}else{this.videoId=null}var i=/[?&]list=([^#\&\?]+)/;r=t.match(i);if(r!=null&&r.length>1){this.playlistId=r[1]}else{if(this.playlistId){delete this.playlistId}}var s=/[?&]vq=([^#\&\?]+)/;r=t.match(s);if(r!=null&&r.length>1){this.userQuality=r[1];e(this.qualityTitle,videojs.Youtube.parseQualityName(this.userQuality))}}};videojs.Youtube.prototype.src=function(e){if(e){this.parseSrc(e);delete this.defaultQuality;if(this.videoId==null){}else{if(this.player_.options()["autoplay"]){this.ytplayer.loadVideoById({videoId:this.videoId,suggestedQuality:this.userQuality})}else{this.ytplayer.cueVideoById({videoId:this.videoId,suggestedQuality:this.userQuality})}this.player_el_.querySelectorAll(".vjs-poster")[0].style.backgroundImage="url(https://img.youtube.com/vi/"+this.videoId+"/0.jpg)";this.player_.poster("https://img.youtube.com/vi/"+this.videoId+"/0.jpg")}}return this.srcVal};videojs.Youtube.prototype.load=function(){};videojs.Youtube.prototype.play=function(){if(this.videoId!=null){if(!this.player_.options()["ytcontrols"]){this.player_.trigger("waiting")}if(this.isReady_){this.ytplayer.playVideo()}else{this.playOnReady=true}}};videojs.Youtube.prototype.pause=function(){this.ytplayer.pauseVideo()};videojs.Youtube.prototype.paused=function(){return this.ytplayer?this.lastState!==YT.PlayerState.PLAYING&&this.lastState!==YT.PlayerState.BUFFERING:true};videojs.Youtube.prototype.currentTime=function(){return this.ytplayer&&this.ytplayer.getCurrentTime?this.ytplayer.getCurrentTime():0};videojs.Youtube.prototype.setCurrentTime=function(e){this.ytplayer.seekTo(e,true);this.player_.trigger("timeupdate")};videojs.Youtube.prototype.duration=function(){return this.ytplayer&&this.ytplayer.getDuration?this.ytplayer.getDuration():0};videojs.Youtube.prototype.currentSrc=function(){return this.srcVal};videojs.Youtube.prototype.volume=function(){if(this.ytplayer&&isNaN(this.volumeVal)){this.volumeVal=this.ytplayer.getVolume()/100}return this.volumeVal};videojs.Youtube.prototype.setVolume=function(e){if(e&&e!=this.volumeVal){this.ytplayer.setVolume(e*100);this.volumeVal=e;this.player_.trigger("volumechange")}};videojs.Youtube.prototype.muted=function(){return this.mutedVal};videojs.Youtube.prototype.setMuted=function(e){if(e){this.ytplayer.mute()}else{this.ytplayer.unMute()}this.mutedVal=e;this.player_.trigger("volumechange")};videojs.Youtube.prototype.buffered=function(){if(this.ytplayer&&this.ytplayer.getVideoBytesLoaded){var e=this.ytplayer.getVideoBytesLoaded();var t=this.ytplayer.getVideoBytesTotal();if(!e||!t)return 0;var n=this.ytplayer.getDuration();var r=e/t*n;var i=this.ytplayer.getVideoStartBytes()/t*n;return videojs.createTimeRange(i,i+r)}else{return videojs.createTimeRange(0,0)}};videojs.Youtube.prototype.supportsFullScreen=function(){return true};videojs.Youtube.isSupported=function(){return true};videojs.Youtube.canPlaySource=function(e){return e.type=="video/youtube"};videojs.Youtube.canControlVolume=function(){return true};videojs.Youtube.loadingQueue=[];videojs.Youtube.prototype.loadYoutube=function(){this.ytplayer=new YT.Player(this.id_,{events:{onReady:function(e){e.target.vjsTech.onReady()},onStateChange:function(e){e.target.vjsTech.onStateChange(e.data)},onPlaybackQualityChange:function(e){e.target.vjsTech.onPlaybackQualityChange(e.data)},onError:function(e){e.target.vjsTech.onError(e.data)}}});this.ytplayer.vjsTech=this};videojs.Youtube.makeQueryString=function(e){var t=[];for(var n in e){if(e.hasOwnProperty(n)){t.push(n+"="+e[n])}}return t.join("&")};window.onYouTubeIframeAPIReady=function(){var e;while(e=videojs.Youtube.loadingQueue.shift()){e.loadYoutube()}videojs.Youtube.loadingQueue=[];videojs.Youtube.apiReady=true};videojs.Youtube.prototype.onReady=function(){this.isReady_=true;this.triggerReady();this.player_.trigger("loadedmetadata");if(typeof this.player_.loadingSpinner!="undefined"){this.player_.loadingSpinner.hide()}if(this.player_.options()["muted"]){this.setMuted(true)}if(this.playOnReady){this.playOnReady=false;this.play()}};videojs.Youtube.prototype.updateQualities=function(){var n=this.ytplayer.getAvailableQualityLevels();var r=this;if(n.indexOf(this.userQuality)<0){e(r.qualityTitle,videojs.Youtube.parseQualityName(this.defaultQuality))}if(n.length==0){this.qualityButton.style.display="none"}else{this.qualityButton.style.display="";while(this.qualityMenuContent.hasChildNodes()){this.qualityMenuContent.removeChild(this.qualityMenuContent.lastChild)}for(var i=0;i<n.length;++i){var s=document.createElement("li");s.setAttribute("class","vjs-menu-item");e(s,videojs.Youtube.parseQualityName(n[i]));s.setAttribute("data-val",n[i]);if(n[i]==this.quality)videojs.Youtube.addClass(s,"vjs-selected");t(s,"click",function(){var t=this.getAttribute("data-val");r.ytplayer.setPlaybackQuality(t);r.userQuality=t;e(r.qualityTitle,videojs.Youtube.parseQualityName(t));var n=r.qualityMenuContent.querySelector(".vjs-selected");if(n)videojs.Youtube.removeClass(n,"vjs-selected");videojs.Youtube.addClass(this,"vjs-selected")});this.qualityMenuContent.appendChild(s)}}};videojs.Youtube.prototype.onStateChange=function(e){if(e!=this.lastState){switch(e){case-1:this.player_.trigger("durationchange");break;case YT.PlayerState.ENDED:if(!this.player_.options()["ytcontrols"]){this.player_el_.querySelectorAll(".vjs-poster")[0].style.display="block";if(typeof this.player_.bigPlayButton!="undefined"){this.player_.bigPlayButton.show()}}this.player_.trigger("ended");break;case YT.PlayerState.PLAYING:if(typeof this.player_.bigPlayButton!="undefined"){this.player_.bigPlayButton.hide()}this.updateQualities();this.player_.trigger("timeupdate");this.player_.trigger("durationchange");this.player_.trigger("playing");this.player_.trigger("play");break;case YT.PlayerState.PAUSED:this.player_.trigger("pause");break;case YT.PlayerState.BUFFERING:this.player_.trigger("timeupdate");if(!this.player_.options()["ytcontrols"]){this.player_.trigger("waiting")}break;case YT.PlayerState.CUED:break}this.lastState=e}};videojs.Youtube.convertQualityName=function(e){switch(e){case"144p":return"tiny";case"240p":return"small";case"360p":return"medium";case"480p":return"large";case"720p":return"hd720";case"1080p":return"hd1080"}return"auto"};videojs.Youtube.parseQualityName=function(e){switch(e){case"tiny":return"144p";case"small":return"240p";case"medium":return"360p";case"large":return"480p";case"hd720":return"720p";case"hd1080":return"1080p"}return"auto"};videojs.Youtube.prototype.onPlaybackQualityChange=function(t){if(typeof this.defaultQuality==="undefined"){this.defaultQuality=t;if(typeof this.userQuality!=="undefined"){return}}this.quality=t;e(this.qualityTitle,videojs.Youtube.parseQualityName(t));switch(t){case"medium":this.player_.videoWidth=480;this.player_.videoHeight=360;break;case"large":this.player_.videoWidth=640;this.player_.videoHeight=480;break;case"hd720":this.player_.videoWidth=960;this.player_.videoHeight=720;break;case"hd1080":this.player_.videoWidth=1440;this.player_.videoHeight=1080;break;case"highres":this.player_.videoWidth=1920;this.player_.videoHeight=1080;break;case"small":this.player_.videoWidth=320;this.player_.videoHeight=240;break;case"tiny":this.player_.videoWidth=144;this.player_.videoHeight=108;break;default:this.player_.videoWidth=0;this.player_.videoHeight=0;break}this.player_.trigger("ratechange")};videojs.Youtube.prototype.onError=function(e){this.player_.error=e;this.player_.trigger("error");if(e==100||e==101||e==150){this.player_.bigPlayButton.hide();this.player_.loadingSpinner.hide();this.player_.posterImage.hide()}};videojs.Youtube.addClass=function(e,t){if((" "+e.className+" ").indexOf(" "+t+" ")==-1){e.className=e.className===""?t:e.className+" "+t}};videojs.Youtube.removeClass=function(e,t){var n,r;if(e.className.indexOf(t)==-1){return}n=e.className.split(" ");for(r=n.length-1;r>=0;r--){if(n[r]===t){n.splice(r,1)}}e.className=n.join(" ")};var n=document.createElement("style");var r="   .vjs-youtube .vjs-poster { background-size: 100%!important; }  .vjs-poster, .vjs-loading-spinner, .vjs-big-play-button, .vjs-text-track-display{ pointer-events: none !important; }  .vjs-youtube.vjs-user-active .iframeblocker { display: none; }  .vjs-youtube.vjs-user-inactive .vjs-tech.onDesktop { pointer-events: none; }  .vjs-quality-button > div:first-child > span:first-child { position:relative;top:7px }  ";n.setAttribute("type","text/css");document.getElementsByTagName("head")[0].appendChild(n);if(n.styleSheet){n.styleSheet.cssText=r}else{n.appendChild(document.createTextNode(r))}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(e){var t=this.length>>>0;var n=Number(arguments[1])||0;n=n<0?Math.ceil(n):Math.floor(n);if(n<0)n+=t;for(;n<t;n++){if(n in this&&this[n]===e)return n}return-1}}})();
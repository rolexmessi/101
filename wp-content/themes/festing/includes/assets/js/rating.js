/*
* Base rating Javascript for kentooz themes
*/
;(function(e){var t=window.ktz_ajax_data||null;e.fn.wpAjaxRating=function(){return this.each(function(){var n=this,r=parseInt(this.getAttribute("data-post-id"),10);e(this).on("click","a",function(i){var s=parseInt(this.getAttribute("data-value"),10),o={action:"ktz_stars_rating",rating:s,post_id:r},u=function(t,r){e(n).addClass("is-voted").find(".ktz-stars-overlay").css({width:100-t*100/5+"%"}).end().parent().find(".ktz-stars-rating-count").html(r).end().parent().find(".ktz-stars-rating-value").html(parseInt(t*100)/100)},a=function(e){n.setAttribute("data-tooltip",e)};if(t===null){t=window.ktz_ajax_data||null}i.preventDefault();if(/\bis-voted\b/.test(n.className)===null||s>5||s<1){return}e.post(t.ajax_url,o,function(e){switch(e.status){case t.codes.PREVIOUSLY_VOTED:a(t.messages.previously_voted);break;case t.codes.REQUEST_ERROR:a(t.messages.request_error);break;case t.codes.SUCCESS:u(e.result,e.votes);a(t.messages.success);break;default:a(t.messages.unknown)}},"json")})})};e(function(){e(".ktz-stars-wrapper").wpAjaxRating()})})(window.jQuery)